---
description: 수학적 엔진 분석 및 파라미터 최적화 워크플로우
---

수학적 엔진을 활용하여 거래 성과를 분석하고 파라미터를 최적화하는 단계입니다.

1. **데이터 수집**
   - 봇을 실행하여 시장 데이터를 수집합니다. 
   - 매수 시그널이 발생할 때마다 `signal_snapshots` 테이블에 당시의 RSI, 가격 등의 정보가 기록됩니다.
   - `ResponseManager`가 시그널 이후 1분/5분간의 가격 변화를 추적하여 `response_metrics` 테이블에 저장합니다.

2. **성과 분석 리포트 확인**
   - 텔레그램 채팅창에 `/analyze` 또는 `분석` 명령어를 입력합니다.
   - 수학적 엔진이 누적된 데이터를 바탕으로 RSI 구간별 승률과 기대 수익률을 계산하여 리포트를 제공합니다.
   - 충분한 데이터(구간별 최소 5건 이상 권장)가 쌓일수록 분석의 정확도가 높아집니다.

3. **확률 기반 매매 설정**
   - `check_n_buy.py` 내의 수학적 필터는 자동으로 작동합니다.
   - `math_min_win_rate` (기본 0.55): 이 확률보다 낮은 구간에서는 매수를 진행하지 않습니다.
   - `math_min_sample_count` (기본 5): 해당 구간의 데이터가 이 횟수 이상일 때만 확률 필터를 적용합니다.

4. **비중 최적화 (Probabilistic Position Sizing)**
   - 기대 승률이 높을수록 매수 비중을 자동으로 확대합니다 (최대 1.5배).
   - 기대 승률이 기준치 근처라면 비중을 축소하거나 기본 비중을 유지합니다.

// turbo
5. **분석 결과로 초기 설정 최적화**
   - 리포트에서 추천하는 "최적 RSI 구간"을 확인합니다.
   - 필요 시 `settings.json` 또는 웹 대시보드에서 `rsi_limit` 등의 기본 파라미터를 조정하여 전략을 정교화합니다.
