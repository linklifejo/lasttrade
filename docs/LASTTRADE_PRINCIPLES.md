
# 📜 LASTTRADE 핵심 원칙 (Principles) v2.5
> "원칙이 없으면 실패한다. 타협하면 무너진다."

## 1. 매수 원칙 (Buying)
*   **1:1:2:4:8 전략**: 매수는 철저하게 기하급수적 비중(Martingale variant)을 따른다.
    *   1차: 1 (10%)
    *   2차: 1 (10%)
    *   3차: 2 (20%)
    *   4차: 4 (40%)
    *   5차: 8 (MAX) - *설정에 따라 유동적이나 기본 비율은 유지*
*   **자금 관리의 절대 원칙 (Budget Integrity)**: 
    *   **"타협 금지"**: 자금이 부족하다고 분할 횟수나 전략을 수정하지 않는다.
    *   **"집중 투자"**: 설정된 분할 횟수(예: 5회)를 완주할 자금이 부족하다면, **목표 종목 수(Stock Count)를 과감히 줄인다.**
    *   어설프게 여러 종목을 건드리다 돈이 말라서 물타기를 멈추는 것은 패배의 지름길이다.
*   **진입 금지**: 
    *   15시(오후 3시) 이후에는 신규 진입을 금지한다. (청산 임박 리스크)
    *   RSI, 승률 등 보조지표가 기준 미달이면 절대 매수하지 않는다.
*   **최소 매수 금액**: 계좌 잔고가 허락하는 한, 설정된 `MIN_PURCHASE_AMOUNT` (기본 2,000원) 미만의 주문은 넣지 않는다.

## 2. 매도 원칙 (Selling)
*   **AI 리스크 관리 (AI Dynamic Risk Management)**: 
    - **"칼손절 지양"**: 지정된 단계(4차)에 도달했다고 해서 무조건 전량 매도하지 않는다.
    - **"AI와 상의"**: 해당 단계에서 AI 가점(RSI, 추세 등)을 확인하여, 반등 기미가 있다면 보유(HOLD)하거나, 불안정하다면 **비중 축소(50% 분할 매도)**를 통해 리스크를 조절한다.
    - **"추가 매수를 통한 리셋"**: 분할 매도 후 가격이 더 하락하여 다음 물타기 지점에 도달할 경우, **추가 매수(Watering)를 수행할 수 있으며**, 매수 성공 시 AI의 리스크 판단 이력은 초기화되어 새로운 시점에서 대응한다.
    - **"확실한 이탈 시에만 정리"**: AI가 확실한 추세 붕괴를 감지했을 때만 전량 매도(FULL SELL)를 수행한다.
*   **익절 (Take Profit)**: 
    *   목표 수익률 도달 시 미련 없이 전량 매도한다.
*   **장 마감 청산 (Liquidation)**: 
    *   설정된 청산 시간(예: 15:20)이 되면 모든 보유 종목을 시장가로 정리한다.
    *   단, 실현손익이 마이너스라 하더라도 시스템 종료를 위해 원칙대로 청산한다.

## 3. 물타기 원칙 (Watering)
*   **상대적 물타기**: 
    *   단순히 -N% 빠졌다고 사는 게 아니라, **내 평단가 대비** 하락폭을 기준으로 한다.
*   **끝까지 책임진다**: 
    *   한 번 매수한 종목은 MAX 단계(설정값)까지 자금이 허락하는 한 끝까지 추매하여 탈출을 시도한다.
    *   자금 부족으로 중간에 멈추는 일은 애초에 '매수 원칙' 단계에서 차단해야 한다. (종목 수 조절)

## 4. [New] 신고가 추세 추종 전략 (New High Strategy) 
> **"강한 놈이 더 간다. 하지만 꺾이면 바로 자른다."**
*   **진입 (Entry)**:
    *   **RSI 50 이상**: 상승 추세가 확인된 종목만 매수한다.
    *   **RSI 70 이상 (과열)**: 매수는 하되, 상투 리스크를 고려하여 **1차 매수 금액을 50%만 투입(정찰병)**한다.
*   **대응 (Response)**:
    *   **RSI 35 ~ 50 (눌림목)**: 신고가 종목의 건전한 조정으로 보고 **HOLD**하거나 **물타기**로 대응한다.
    *   **RSI 35 미만 (추세 붕괴)**: 매수 단계(1~MAX)와 상관없이 **추세 이탈(Trend Break)**로 간주하여 **즉시 50% 비중 축소**한다.

## 5. 시스템 운영 원칙
*   **AI Guardian (AI 가디언)**: 
    - 봇의 생존뿐만 아니라 **에러의 원인을 분석하고 보고**하는 지능형 감시를 수행한다.
*   **365 무중단 원칙**: 
    - 시스템은 1년 365일 정지하지 않는 것을 원칙으로 한다. (Auto-Restart 365)
    - 주말과 공휴일에도 가디언은 생존하며, 매일 새벽 정기 유지보수를 통해 스스로를 정화한다.

## 5. 모드별 특이사항
*   **Mock(가상) / Paper(모의) / Real(실전)**: 
    *   모든 로직은 실전과 동일하게 작동해야 한다. 
    *   Mock 모드라고 해서 대충 넘어가거나 예외를 두지 않는다. (연습은 실전처럼)

## 6. AI 학습 및 진화 원칙 (AI Evolution)
*   **Incremental Learning (증분 학습)**: 
    - AI 모델은 매번 처음부터(Zero-base) 학습하지 않는다.
    - 기존에 축적된 지식(`DL_stock_model.pth`)을 바탕으로, **최근 2일간의 데이터 및 당일 발생한 새로운 패턴**만을 추가로 학습하여 효율성과 적응력을 극대화한다.
*   **복기 및 자율 수정**:
    - 매일 장 마감 후(`learn_daily.py`), AI는 스스로의 매매를 복기하고 승률과 수익률을 분석한다.
    - 분석 결과 개선이 필요하다고 판단되면, `logic_evolver.py`를 통해 스스로 코드를 패치하고 진화한다.
*   **AI의 역할 재정의 (Role Definition)**:
    - **No Direct Recommender**: AI 모델이 독자적으로 종목을 발굴하여 매수를 추천하는 행위는 금지한다.
    - **Advisor Only**: 검색식 등 외부 소스에 의해 포착된 종목에 대해, 학습된 데이터(60분봉 추세, 승률 등)를 기반으로 **매수 비중을 조절(Weight Tuning)하는 판단자 역할**만 수행한다.
